<!DOCTYPE HTML>
<html>
	<head>
		<title>Participantes</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<style> 
  		.even{background-color: white;} 
  		.odd{background-color: rgba(53, 53, 53, 0.1);}
  		.premio{background-color: #b3cccc;}
	</style>
	<body class="is-preload">

		<!-- Header -->
			<header id="header">
				<a class="logo" href="TelaInicial.html"><font size="3">Bolão da Copa</font></a>
				<a class="logo" href="MinhaConta.html"><font size="1">Olá, </font><font id="nomeLogado" size="1"></font></a>
				<nav>
					<a href="#menu">Menu</a>
				</nav>
			</header>

		<!-- Nav -->
			<nav id="menu">
				<ul class="links">
					<li><a class="fa fa-home" href="TelaInicial.html">&nbsp; HOME</a></li>
					<!--<li><a class="fa fa-plus-square-o" href="NovaAposta.html">&nbsp; APOSTAR</a></li>-->
					<li><a class="fa fa-user-o" href="MinhaConta.html">&nbsp; MINHA CONTA</a></li>
					<li><a class="fa fa-folder-open-o" href="MinhasApostas.html">&nbsp; MINHA APOSTA</a></li>
					<li><a class="fa fa-newspaper-o" href="Regras.html">&nbsp; REGRAS DO BOLÃO</a></li>
					<li><a class="fa fa-sign-out" href="#" onclick='firebaseSignOut()' >&nbsp; LOGOUT</a></li>
				</ul>
			</nav>

		<!-- Heading -->
			<div id="heading" >
				<h1>Participantes</h1>
			</div>

		<!-- Main -->
			<section id="main" class="wrapper">
				<div class="inner">
					<div class="content">

						<div class="table-wrapper">
										<table class="alt" id="participantes">
											<thead align="center">
												<tr>
													<td bgcolor="#00798C"><b><font color="white">ID</font></b></td>
													<td bgcolor="#00798C"><b><font color="white">Participantes</font></b></td>
												</tr>
											</thead>
											<tbody align="center">
												<tr>
													<td>-</td>
													<td width="80%">carregando...</td>
												</tr>
											</tbody>
											<tfoot>
											</tfoot>
										</table>
									</div>
					</div>
				</div>
			</section>

		<!-- Footer -->
			<footer id="footer">
				<div class="inner">
					<div class="content">
						<section>
							<h4>Sobre o Bolão</h4>
							<p>O Bolão da Copa foi criado sem fins lucrativos, com o objetivo de entreter um grupo de amigos e tornar a experiencia de assistir a Copa do Mundo 2018 ainda mais interessante. A forma de pontuação foi reformulada e pode ser conhecida nas <a href="Regras.html"><u>regras</u></a>. Além disso, a ideia da tabela de classificação de todos os apostadores trás uma competitividade bacana para o bolão! Boa Sorte!</p>
						</section>
						<section>
							<h5>Dúvidas?</h5>
							<ul class="alt">
								<li>Mande a pergunta para majoaovitor@gmail.com</li>
							</ul>
						</section>
						<section>
							<h5>Agradecimentos e Redes Sociais</h5>
							<p>Mando um agradecimento especial para o <u>Henrique Brighenti</u> que me ajudou bastante na criação desse bolão me apresentando ferramentas de desenvolvimento e me ensinando como usa-las. Sem isso, eu não teria terminado o bolão a tempo. Agradeço também o <u>Rafael Ramos</u> pelas dicas e por me ajudar nos primeiros passos da criação do site e por fim agradeço ao <u>Matheus Rungue</u> pela confecção do simbolo do bolão! Valeu pela contribuição pessoal!</p>
							<ul class="plain">
								<!--<li><a href="https://www.facebook.com/joao.vitor.27"><i class="icon fa-facebook">&nbsp;</i>João Vítor - facebook</a></li>-->
								<li><a href="https://www.instagram.com/joaovitor.ma/"><i class="icon fa-instagram">&nbsp;</i></a><a href="https://www.facebook.com/joao.vitor.27"><i class="icon fa-facebook"></i>João Vítor</a></li>
								<li><a href="https://www.instagram.com/hsbrighenti"><i class="icon fa-instagram">&nbsp;</i></a><a href="https://www.facebook.com/hsbrighenti"><i class="icon fa-facebook"></i>Henrique Brighenti</a></li>
								<li><a href="https://www.instagram.com/rafar279/"><i class="icon fa-instagram">&nbsp;</i></a><a href="https://www.facebook.com/rafael.ramos.752861"><i class="icon fa-facebook"></i>Rafael Ramos</a></li>
								<li><a href="https://www.instagram.com/matheusrungue"><i class="icon fa-instagram">&nbsp;</i></a><a href="https://www.facebook.com/MatheusRungue"><i class="icon fa-facebook"></i>Matheus Rungue</a></li>
								
							</ul>
						</section>
					</div>
					<div class="copyright">
						<p>Bolão da Copa</p>
						<p> &copy 2018 - João Vítor</p>
					</div>
				</div>
			</footer>

		<!-- Scripts -->
			<script src="https://www.gstatic.com/firebasejs/4.12.0/firebase-app.js"></script>
			<script src="https://www.gstatic.com/firebasejs/4.12.0/firebase-auth.js"></script>
			<script src="https://www.gstatic.com/firebasejs/4.12.0/firebase-database.js"></script>
			<script src="assets/js/firebase.js"></script>
			
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			
			<script type="text/javascript">
				//busca todos os participantes no banco e conta quantos tem
				var numeroParticipantes=0;
				databaseBolao.ref("usuarios").on('value', function(snap){
   					snap.forEach(function(childNodes){
   						if(childNodes.val().nome != null)numeroParticipantes ++;
				      	//console.log(numeroParticipantes);
				  });
   				});
   				//preenche um vetor com todos os participantes
				var ArrayParticipantes = new Array(numeroParticipantes);
				var i=0;
				databaseBolao.ref("usuarios").on('value', function(snap){
   					snap.forEach(function(childNodes){
   						var usuarioParaAdd = childNodes.val().nome;
				      	var ultimoNome;

				      	if (ultimoNome != usuarioParaAdd){
				      		ArrayParticipantes[i] = usuarioParaAdd;
				      		ultimoNome = usuarioParaAdd;
				      		i++;
				      	}
				  	});
					//console.log(ArrayParticipantes);
					//console.log(ArrayParticipantes.sort());
					// Insere os participantes no SELECT
					insereParticipante("participantes", ArrayParticipantes.sort());
					deleteLastrow("participantes");
					alternate("participantes");
				});
				function insereParticipante(tableID, vetorParticipantes){
					var table = document.getElementById(tableID);
					for (var i = 0; i < vetorParticipantes.length; i++) {
						var rowCount = table.rows.length;
						var row = table.insertRow(rowCount-1);
						var cell1 = row.insertCell(0);
				    	var cell2 = row.insertCell(1);
						
						cell1.innerHTML = i+1;
				    	cell2.innerHTML = vetorParticipantes[i];
					}
					
				}
				function deleteLastrow(tableID) {
				    var table = document.getElementById(tableID);
				    var rowCount = table.rows.length;

				    table.deleteRow(rowCount-1);
				}
			</script>
			<script>
				/*
				//Organiza os participantes em ordem alfabetica
				setInterval(function() {
				  if (typeof code_happened === 'undefined') {
					 	var table, rows, switching, i, x, y, shouldSwitch;
					    table = document.getElementById("participantes");
					    switching = true;
					    while (switching) {
					    	//start by saying: no switching is done:
					    	switching = false;
					    	rows = table.getElementsByTagName("TR");
					    	for (i = 1; i < (rows.length - 1); i++) {
					      		//start by saying there should be no switching:
					      		shouldSwitch = false;
					      		x = rows[i].getElementsByTagName("TD")[1];
					      		y = rows[i + 1].getElementsByTagName("TD")[1];
					      		//check if the two rows should switch place:
					      		if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
					        		//if so, mark as a switch and break the loop:
							        shouldSwitch = true;
							        break;
							    }
					    	}
					    	if (shouldSwitch) {
					      		rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
					      		switching = true;
					    	}
					    	window.code_happened = true;
					    	//seta o ID corretamente da tabela de participantes
				  			for (i = 1; i < (rows.length - 1); i++) {
					      		rows[i].getElementsByTagName("TD")[0] = i;
					    	}
				  		}
				    }
				}, 3 * 1000); // 60 * 1000 milsec
				*/
			</script>
			<script>
				/*
				//Organiza o ID dos participantes em ordem crescente
				setInterval(function() {
				  if (typeof organizedID === 'undefined') {
					 	var table, rows;
					    table = document.getElementById("participantes");
					    rows = table.getElementsByTagName("TR");
				    	window.organizedID = true;
				    	//seta o ID corretamente da tabela de participantes
			  			console.log("vou organizar ID");
			  			for (i = 1; i < (rows.length); i++) {
				      		rows[i].getElementsByTagName("TD")[0].innerHTML = i;
				    	}

				    }
				    alternate("participantes");
				}, 3.2 * 1000); // 60 * 1000 milsec
				*/
			</script>
			<script type="text/javascript">
				function alternate(id){ 
				  if(document.getElementsByTagName){  
				    var table = document.getElementById(id);   
				    var rows = table.getElementsByTagName("tr");   
				    for(i = 1; i < rows.length; i++){           
				  //manipulate rows 
				      if(i % 2 == 0){ 
				        rows[i].className = "even";
				        rows[i].border = "10";  
				      }else{ 
				        rows[i].className = "odd";
				        rows[i].border = "10"; 
				      }       
				    } 
				  }
				}
			</script>
			
			<script type="text/javascript">
				firebaseGetUserData().then(function(usuario){
					//console.log(usuario);
					$('#nomeLogado').html(usuario.nome);
				})

			</script>

	</body>
</html>