<html>

<head>
    <title>Login Screen</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <link rel="stylesheet" href="assets/css/main.css" />
</head>

<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="assets/css/login.css">

<body>

    <!-- Header -->
    <header id="header">
        <a class="logo" href="index.html">Bolão da Copa do Mundo 2018</a>
    </header>

    <section id="cta" class="wrapper">
        <div>
            <section align="center">
                <img src="images/logo/logo_cinza_grande.png" alt="logo_cinza" class="logo" width="auto" height="200px" align="center">
            </section>
            <section>
                <form id="login" style="text-align:center;">
                    <section>
                        <label for="login"></label>
                        <input type="text" placeholder="email" id="usuario" name="usuario" required>
                    </section>
                    <section>
                        <label for="login"></label>
                        <input type="password" placeholder="senha" id="senha" name="senha" required>
                    </section>
                    <section>
                        &nbsp;
                    </section>
                    <section>
                        &nbsp;
                        <button align="center" width="auto" class="button button4" style="vertical-align:middle">
                            <span>LOGIN</span>
                        </button>
                        <!-- <button type="submit">Login</button> -->
                    </section>
                    <section>
                        &nbsp; &nbsp;
                        <p align="right" class="container" style="background-color:rgba(255, 255, 255, 0.075)">Esqueci minha
                            <span>
                                <a href="EsqueciSenha.html">senha</a>
                            </span>
                        </p>
                    </section>
                </form>
            </section>
    </section>
    </div>
    </section>


    <!-- Footer -->
            <footer id="footer">
                <div class="inner">
                    <div class="content">
                        <section>
                            <h4>Sobre o Bolão</h4>
                            <p>O Bolão da Copa foi criado sem fins lucrativos, com o objetivo de entreter um grupo de amigos e tornar a experiencia de assistir a Copa do Mundo 2018 ainda mais interessante. A forma de pontuação foi reformulada e pode ser conhecida nas <a href="Regras.html"><u>regras</u></a>. Além disso, a ideia da tabela de classificação de todos os apostadores trás uma competitividade bacana para o bolão! Boa Sorte!</p>
                        </section>
                        <section>
                            <h5>Dúvidas?</h5>
                            <ul class="alt">
                                <li>Mande a pergunta para majoaovitor@gmail.com</li>
                            </ul>
                        </section>
                        <section>
                            <h5>Agradecimentos e Redes Sociais</h5>
                            <p>Mando um agradecimento especial para o <u>Henrique Brighenti</u> que me ajudou bastante na criação desse bolão me apresentando ferramentas de desenvolvimento e me ensinando como usa-las. Sem isso, eu não teria terminado o bolão a tempo. Agradeço também o <u>Rafael Ramos</u> pelas dicas e por me ajudar nos primeiros passos da criação do site e por fim agradeço ao <u>Matheus Rungue</u> pela confecção do simbolo do bolão! Valeu pela contribuição pessoal!</p>
                            <ul class="plain">
                                <!--<li><a href="https://www.facebook.com/joao.vitor.27"><i class="icon fa-facebook">&nbsp;</i>João Vítor - facebook</a></li>-->
                                <li><a href="https://www.instagram.com/joaovitor.ma/"><i class="icon fa-instagram">&nbsp;</i></a><a href="https://www.facebook.com/joao.vitor.27"><i class="icon fa-facebook"></i>João Vítor</a></li>
                                <li><a href="https://www.instagram.com/hsbrighenti"><i class="icon fa-instagram">&nbsp;</i></a><a href="https://www.facebook.com/hsbrighenti"><i class="icon fa-facebook"></i>Henrique Brighenti</a></li>
                                <li><a href="https://www.instagram.com/rafar279/"><i class="icon fa-instagram">&nbsp;</i></a><a href="https://www.facebook.com/rafael.ramos.752861"><i class="icon fa-facebook"></i>Rafael Ramos</a></li>
                                <li><a href="https://www.instagram.com/matheusrungue"><i class="icon fa-instagram">&nbsp;</i></a><a href="https://www.facebook.com/MatheusRungue"><i class="icon fa-facebook"></i>Matheus Rungue</a></li>
                                
                            </ul>
                        </section>
                    </div>
                    <div class="copyright">
                        <p>Bolão da Copa</p>
                        <p> &copy 2018 - João Vítor</p>
                    </div>
                </div>
            </footer>
    <!-- Scripts -->
    <script src="https://www.gstatic.com/firebasejs/4.12.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.12.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.12.0/firebase-database.js"></script>
	<script src="assets/js/firebase.js"></script>


    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>
    <script>
        /*
    	firebase.auth().onAuthStateChanged(function (user) {
		    if (user) {
		        window.location = 'TelaInicial.html';
		    }
            else{
                toast("snackbar_failure");
            }
            
		});

        const element = document.querySelector('form');
        element.addEventListener('submit', function (e) {
            e.preventDefault();
            var usuario = $('#usuario').val();
            var senha = $('#senha').val();
            firebase.auth().signInWithEmailAndPassword(usuario, senha);
        });
        */
        /*
        firebase.auth().onAuthStateChanged(function (user) {
            if (user) {
                window.location = 'TelaInicial.html';
            }
            else{
                //toast("snackbar_failure");
            }
            
        });

        const element = document.querySelector('form');
        element.addEventListener('submit', function (e) {
            e.preventDefault();
            var usuario = $('#usuario').val();
            var senha = $('#senha').val();
            console.log( "click event" );
            firebase.auth().signInWithEmailAndPassword(usuario, senha).catch(function(error) {
                var errorCode = error.code;
                var errorMessage = error.message;

                // User not found
                if ( errorCode === 'auth/user-not-found' ) {
                    toast("snackbar_failure_user_not_found");
                // Wrong Password Error
                } else if ( errorCode === 'auth/wrong-password' ) {
                    
                    toast("snackbar_failure_wrong_password");
                } else {
                     window.location = 'TelaInicial.html';
                }
                console.log( error );
            });
        });
        */
        const element = document.querySelector('form');
        element.addEventListener('submit', function (e) {
            e.preventDefault();
            var usuario = $('#usuario').val();
            var senha = $('#senha').val();
            //firebase.auth().signInWithEmailAndPassword(usuario, senha);

            var auth = null;
            firebase
              .auth()
              .signInWithEmailAndPassword(usuario, senha)
              .then( function(user){
                console.log("Authenticated successfully with payload:", user);
                auth = user;
                window.location = 'TelaInicial.html';
              })
              .catch(function(error){
                console.log("Login Failed!", error);
                if ( error.code === 'auth/user-not-found' ) {
                    alert("Usuário não encontrado!");
                    console.log("Usuário não encontrado!");
                }
                else if ( error.code === 'auth/wrong-password' ) {
                    alert("Senha incorreta! Tente novamente.");
                    console.log("Senha incorreta! Tente novamente.");
                }
                else if ( error.code === 'auth/invalid-email' ) {
                    alert("Email inválido.");
                    console.log("Email inválido.");
                }
              });
          })

        
    </script>


</body>

</html>